'use strict';var d=function(){try{var a={get passive(){}};window.addEventListener("test",a,a);window.removeEventListener("test",a,a);return!0}catch(b){return!1}}(),f="function"===typeof Event?function(){window.dispatchEvent(new Event("resize"))}:function(){var a=window.document.createEvent("UIEvents");a.initUIEvent("resize",!0,!1,window,0);window.dispatchEvent(a)};function g(a,b,c){return 1>(a/=15)?c/2*a*a+b:-c/2*(--a*(a-2)-1)+b}
export default function h(a,b){if(!k){l=l||[];var c=m(a);if(c)return c;document.querySelector("#"+a).classList.add("bubator");this.a=document.querySelector("#"+a+" .bubator-scrollview");this.o=this.a.querySelector(".bubator-content");this.A=document.querySelector("#"+a+" .bubator-v-thumb");this.G=document.querySelector("#"+a+" .bubator-h-thumb");this.o.style.cssText="margin-right: "+-n+"px; padding-bottom: "+(80-p)+"px;";this.B=new MutationObserver(function(){f()});this.B.observe(this.a,{attributes:!0,childList:!0,
subtree:!0});q=b||8;this.m=0;r(this)&&(this.m=q,this.a.classList.add("h-track-active"));t(this)&&this.a.classList.add("v-track-active");this.w=this.F.bind(this);this.a.addEventListener("scroll",this.w,d?{passive:!0}:!1);u||(u=!0,document.addEventListener("mousedown",v),document.addEventListener("mouseup",w),x=y=0,window.addEventListener("resize",z));this.f=0;this.s=(this.f+y)*this.h/this.b;this.o.scrollLeft=this.s;l[a]=this}}
var l,n,p,q,u,y,x,A,B,C,D,E,F,G,H,k="ontouchstart"in document.documentElement&&/Mobi|Android|Tablet|iPad|iPhone/i.test(navigator.userAgent),I=document.createElement("div");I.classList.add("bubator-test");document.body.appendChild(I);n=I.offsetWidth-I.clientWidth;p=I.offsetHeight-I.clientHeight;document.body.removeChild(I);function m(a){if(a in l)return l[a]}function t(a){a.c=a.a.offsetHeight-80;a.i=a.a.scrollHeight-80;return a.i>a.c}
function r(a){a.b=a.o.offsetWidth;a.h=a.o.scrollWidth;return a.h>a.b}h.prototype.F=function(a){A||(this.u=a.target.scrollTop,B||requestAnimationFrame(this.I.bind(this)),B=!0)};h.prototype.I=function(){B=!1;this.g=~~(this.c*this.u/this.i);this.A.style.transform="translate3d(0px, "+this.g+"px, 0px)"};
function v(a){1<a.button||(a.target.classList.contains("bubator-v-thumb")?(a.preventDefault(),A=!0,C=m(a.target.parentNode.parentNode.id),D=a.clientY,E=L.bind(C),document.addEventListener("mousemove",E)):a.target.classList.contains("bubator-v-track")?(a.preventDefault(),C=m(a.target.parentNode.id),C.scrollVthumb(a.clientY,!1,!0)):a.target.classList.contains("bubator-h-thumb")?(a.preventDefault(),A=!0,C=m(a.target.parentNode.parentNode.id),F=a.clientX,G=M.bind(C),document.addEventListener("mousemove",
G)):a.target.classList.contains("bubator-h-track")&&(a.preventDefault(),C=m(a.target.parentNode.id),C.scrollHthumb(a.clientX,!1,!0)))}function L(a){H||(x=a.clientY-D,D=a.clientY,requestAnimationFrame(this.H.bind(this)));H=!0}function M(a){H||(y=a.clientX-F,F=a.clientX,requestAnimationFrame(this.v.bind(this,!1)));H=!0}
h.prototype.H=function(){H=!1;this.u=(this.g+x)*this.i/this.c;this.a.scrollTop=this.u;this.g=this.c*this.u/this.i;this.A.style.transform=this.g+this.l>this.c-this.m?"translate3d(0px, "+(this.c-this.l-this.m)+"px, 0px)":0>this.g?"translate3d(0px, 0px, 0px)":"translate3d(0px, "+this.g+"px, 0px)"};
h.prototype.v=function(a){H=!1;a||(this.s=(this.f+y)*this.h/this.b,this.o.scrollLeft=this.s);this.f=this.b*this.s/this.h;this.G.style.transform=this.f+this.j>this.b?"translate3d("+(this.b-this.j)+"px, 0px, 0px)":0>this.f?"translate3d(0px, 0px, 0px)":"translate3d("+this.f+"px, 0px, 0px)"};function N(a){a.g+a.l>a.c?a.g=a.c-a.l:0>a.g&&(a.g=0)}function O(a){a.f+a.j>a.b?a.f=a.b-a.j:0>a.f&&(a.f=0)}
h.prototype.scrollVthumb=function(a,b,c){if(!A){var e=this.g;a=c?a-this.a.getBoundingClientRect().top-this.l/2-e:b?Math.ceil(a*this.c/this.i):"number"===typeof a?Math.ceil(a*this.c/this.i-e):Math.ceil(document.querySelector(a).offsetTop*this.c/this.i-e);requestAnimationFrame(this.D.bind(this,0,e,a))}};
h.prototype.scrollHthumb=function(a,b,c){if(!A){var e=this.f;a=c?a-this.a.getBoundingClientRect().left-this.j/2-e:b?Math.ceil(a*this.b/this.h):"number"===typeof a?Math.ceil(a*this.b/this.h-e):Math.ceil(document.querySelector(a).offsetLeft*this.b/this.h-e);requestAnimationFrame(this.C.bind(this,0,e,a))}};h.prototype.D=function(a,b,c){A=!0;a++;this.g=g(a,b,c);this.H();30>a?requestAnimationFrame(this.D.bind(this,a,b,c)):(N(this),x=0,A=!1)};
h.prototype.C=function(a,b,c){A=!0;a++;this.f=g(a,b,c);this.v(!1);30>a?requestAnimationFrame(this.C.bind(this,a,b,c)):(O(this),y=0,A=!1)};function w(){C&&(N(C),O(C),document.removeEventListener("mousemove",E),document.removeEventListener("mousemove",G),C=G=E=null);A=!1}function z(){A=!0;P()}
var P=function(a,b,c){var e;return function(){var J=this,K=arguments;clearTimeout(e);e=setTimeout(function(){e=null;c||a.apply(J,K)},b);c&&!e&&a.apply(J,K)}}(function(){A=!1;var a;for(a in l){C=l[a];var b=C.a.classList;if(r(C)){C.m=q;b.contains("h-track-active")||b.add("h-track-active");var c=C;c.j=~~(c.b*c.b/c.h);if(40>c.j){var e=~~((40-c.j)*c.h/c.b);c.j=40;c.h+=e}c.G.style.width=c.j+"px";C.v(!0);O(C)}else C.m=0,b.contains("h-track-active")&&b.remove("h-track-active");t(C)?(b.contains("v-track-active")||
b.add("v-track-active"),B=!1,C.F({target:{scrollTop:C.a.scrollTop}}),b=C,b.l=~~(b.c*b.c/b.i-b.m),40>b.l&&(c=~~((40-b.l)*b.i/b.c-b.m),b.l=40,b.i+=c),b.A.style.height=b.l+"px"):b.contains("v-track-active")&&b.remove("v-track-active")}C=null},100,!1);
h.prototype.destroy=function(){if(!k){var a=this.a.parentNode.id;m(a)&&(this.B.disconnect(),this.a.removeEventListener("scroll",this.w),this.w=null,this.a.classList.remove("h-track-active"),this.a.classList.remove("v-track-active"),this.o.removeAttribute("style"),document.querySelector("#"+a).classList.remove("bubator"),delete l[a])}};
h.destroyAll=function(){if(!k){for(var a in l)l.hasOwnProperty(a)&&l[a].destroy(a);document.removeEventListener("mousedown",v);document.removeEventListener("mouseup",w);window.removeEventListener("resize",z);u=!1}};
