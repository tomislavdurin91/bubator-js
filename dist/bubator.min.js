'use strict';window.BubatorJS=function(g,c){function a(b,d){if(!a.F){a.m=a.m||[];var f=a.w(b);if(f)return f;c.querySelector("#"+b).classList.add("bubator");this.b=c.querySelector("#"+b+" .bubator-scrollview");this.v=this.b.querySelector(".bubator-content");this.N=c.querySelector("#"+b+" .bubator-v-thumb");this.U=c.querySelector("#"+b+" .bubator-h-thumb");this.v.style.cssText="margin-right: "+-a.fa+"px; padding-bottom: "+(80-a.ea)+"px;";this.X=new MutationObserver(function(){k()});this.X.observe(this.b,
{attributes:!0,childList:!0,subtree:!0});a.Z=d||8;this.u=0;this.S()&&(this.u=a.Z,this.b.classList.add("h-track-active"));this.T()&&this.b.classList.add("v-track-active");this.M=this.Y.bind(this);this.b.addEventListener("scroll",this.M,l?{passive:!0}:!1);a.ba||(a.ba=!0,c.addEventListener("mousedown",a.O),c.addEventListener("mouseup",a.P),a.C=0,a.H=0,g.addEventListener("resize",a.R));this.g=0;this.B=(this.g+a.C)*this.j/this.c;this.v.scrollLeft=this.B;a.m[b]=this}}function h(a,d,c,e){return 1>(a/=e/
2)?c/2*a*a+d:-c/2*(--a*(a-2)-1)+d}var l=function(){try{var a={get passive(){}};g.addEventListener("test",a,a);g.removeEventListener("test",a,a);return!0}catch(d){return!1}}(),k=function(){return"function"===typeof Event?function(){g.dispatchEvent(new Event("resize"))}:function(){var a=g.document.createEvent("UIEvents");a.initUIEvent("resize",!0,!1,g,0);g.dispatchEvent(a)}}();a.F="ontouchstart"in c.documentElement&&/Mobi|Android|Tablet|iPad|iPhone/i.test(navigator.userAgent);a.ma=function(){var b=
c.createElement("div");b.classList.add("bubator-test");c.body.appendChild(b);a.fa=b.offsetWidth-b.clientWidth;a.ea=b.offsetHeight-b.clientHeight;c.body.removeChild(b)}();a.w=function(b){if(b in a.m)return a.m[b]};a.prototype.T=function(){this.f=this.b.offsetHeight-80;this.l=this.b.scrollHeight-80;return this.l>this.f};a.prototype.S=function(){this.c=this.v.offsetWidth;this.j=this.v.scrollWidth;return this.j>this.c};a.prototype.ka=function(){this.s=~~(this.f*this.f/this.l-this.u);if(40>this.s){var a=
~~((40-this.s)*this.l/this.f-this.u);this.s=40;this.l+=a}this.N.style.height=this.s+"px"};a.prototype.ja=function(){this.o=~~(this.c*this.c/this.j);if(40>this.o){var a=~~((40-this.o)*this.j/this.c);this.o=40;this.j+=a}this.U.style.width=this.o+"px"};a.prototype.Y=function(b){a.i||(this.D=b.target.scrollTop,a.G||requestAnimationFrame(this.la.bind(this)),a.G=!0)};a.prototype.la=function(){a.G=!1;this.h=~~(this.f*this.D/this.l);this.N.style.transform="translate3d(0px, "+this.h+"px, 0px)"};a.O=function(b){1<
b.button||(b.target.classList.contains("bubator-v-thumb")?(b.preventDefault(),a.i=!0,a.a=a.w(b.target.parentNode.parentNode.id),a.da=b.clientY,a.L=a.ha.bind(a.a),c.addEventListener("mousemove",a.L)):b.target.classList.contains("bubator-v-track")?(b.preventDefault(),a.a=a.w(b.target.parentNode.id),a.a.scrollVthumb(b.clientY,!1,!0)):b.target.classList.contains("bubator-h-thumb")?(b.preventDefault(),a.i=!0,a.a=a.w(b.target.parentNode.parentNode.id),a.ca=b.clientX,a.J=a.ga.bind(a.a),c.addEventListener("mousemove",
a.J)):b.target.classList.contains("bubator-h-track")&&(b.preventDefault(),a.a=a.w(b.target.parentNode.id),a.a.scrollHthumb(b.clientX,!1,!0)))};a.ha=function(b){a.A||(a.H=b.clientY-a.da,a.da=b.clientY,requestAnimationFrame(this.W.bind(this)));a.A=!0};a.ga=function(b){a.A||(a.C=b.clientX-a.ca,a.ca=b.clientX,requestAnimationFrame(this.K.bind(this,!1)));a.A=!0};a.prototype.W=function(){a.A=!1;this.D=(this.h+a.H)*this.l/this.f;this.b.scrollTop=this.D;this.h=this.f*this.D/this.l;this.N.style.transform=
this.h+this.s>this.f-this.u?"translate3d(0px, "+(this.f-this.s-this.u)+"px, 0px)":0>this.h?"translate3d(0px, 0px, 0px)":"translate3d(0px, "+this.h+"px, 0px)"};a.prototype.K=function(b){a.A=!1;b||(this.B=(this.g+a.C)*this.j/this.c,this.v.scrollLeft=this.B);this.g=this.c*this.B/this.j;this.U.style.transform=this.g+this.o>this.c?"translate3d("+(this.c-this.o)+"px, 0px, 0px)":0>this.g?"translate3d(0px, 0px, 0px)":"translate3d("+this.g+"px, 0px, 0px)"};a.prototype.V=function(){this.h+this.s>this.f?this.h=
this.f-this.s:0>this.h&&(this.h=0)};a.prototype.I=function(){this.g+this.o>this.c?this.g=this.c-this.o:0>this.g&&(this.g=0)};a.prototype.scrollVthumb=function(b,d,f){if(!a.i){var e=this.h;b=f?b-this.b.getBoundingClientRect().top-this.s/2-e:d?Math.ceil(b*this.f/this.l):"number"===typeof b?Math.ceil(b*this.f/this.l-e):Math.ceil(c.querySelector(b).offsetTop*this.f/this.l-e);requestAnimationFrame(this.aa.bind(this,0,e,b))}};a.prototype.scrollHthumb=function(b,d,f){if(!a.i){var e=this.g;b=f?b-this.b.getBoundingClientRect().left-
this.o/2-e:d?Math.ceil(b*this.c/this.j):"number"===typeof b?Math.ceil(b*this.c/this.j-e):Math.ceil(c.querySelector(b).offsetLeft*this.c/this.j-e);requestAnimationFrame(this.$.bind(this,0,e,b))}};a.prototype.aa=function(b,d,c){a.i=!0;b++;this.h=h(b,d,c,30);this.W();30>b?requestAnimationFrame(this.aa.bind(this,b,d,c)):(this.V(),a.H=0,a.i=!1)};a.prototype.$=function(b,d,c){a.i=!0;b++;this.g=h(b,d,c,30);this.K();30>b?requestAnimationFrame(this.$.bind(this,b,d,c)):(this.I(),a.C=0,a.i=!1)};a.P=function(){a.a&&
(a.a.V(),a.a.I(),c.removeEventListener("mousemove",a.L),c.removeEventListener("mousemove",a.J),a.L=null,a.J=null,a.a=null);a.i=!1};a.R=function(){a.i=!0;a.ia()};a.ia=function(a,c,f){var b;return function(){var d=this,e=arguments;clearTimeout(b);b=setTimeout(function(){b=null;f||a.apply(d,e)},c);f&&!b&&a.apply(d,e)}}(function(){a.i=!1;var b;for(b in a.m){a.a=a.m[b];var c=a.a.b.classList;a.a.S()?(a.a.u=a.Z,c.contains("h-track-active")||c.add("h-track-active"),a.a.ja(),a.a.K(!0),a.a.I()):(a.a.u=0,c.contains("h-track-active")&&
c.remove("h-track-active"));a.a.T()?(c.contains("v-track-active")||c.add("v-track-active"),a.G=!1,a.a.Y({target:{scrollTop:a.a.b.scrollTop}}),a.a.ka()):c.contains("v-track-active")&&c.remove("v-track-active")}a.a=null},100,!1);a.prototype.destroy=function(){if(!a.F){var b=this.b.parentNode.id;a.w(b)&&(this.X.disconnect(),this.b.removeEventListener("scroll",this.M),this.M=null,this.b.classList.remove("h-track-active"),this.b.classList.remove("v-track-active"),this.v.removeAttribute("style"),c.querySelector("#"+
b).classList.remove("bubator"),delete a.m[b])}};a.destroyAll=function(){if(!a.F){for(var b in a.m)a.m.hasOwnProperty(b)&&a.m[b].destroy(b);c.removeEventListener("mousedown",a.O);c.removeEventListener("mouseup",a.P);g.removeEventListener("resize",a.R);a.ba=!1}};return a}(window,document);
